<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crypto Charts (JPY)</title>
  <style>
    :root{
      --stage-max-w: 1024px;   /* 添付画像に合わせる */
      --stage-max-h: 576px;    /* 16:9 */
      --stage-vw: 92vw;        /* フル画面より少し小さく */
      --stage-vh: 92vh;

      --gap: 10px;
      --radius: 14px;
      --glass: rgba(20,20,20,.45);
      --glass-border: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
    }

    html, body {
      height: 100%;
      margin: 0;
      background: #0b0b0d;
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", sans-serif;
    }

    /* 画面中央に“少し小さめ”のステージを作る */
    .stage-wrap{
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 18px;
      box-sizing: border-box;
    }

    .stage{
      width: min(var(--stage-vw), var(--stage-max-w));
      height: min(var(--stage-vh), var(--stage-max-h));
      aspect-ratio: 16 / 9;
      box-sizing: border-box;
    }

    /* 一括表示グリッド（画面幅で自動調整） */
    .grid{
      width: 100%;
      height: 100%;
      display: grid;
      gap: var(--gap);
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      grid-auto-rows: 1fr;
    }

    .panel{
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      background: #0f1013;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.08);
    }

    /* 常時表示ラベル（ホバー不要） */
    .label{
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 5;
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 13px;
      letter-spacing: .2px;
      user-select: none;
      pointer-events: none; /* チャート操作を邪魔しない */
      display: flex;
      gap: 8px;
      align-items: center;
      white-space: nowrap;
    }
    .pill{
      font-size: 11px;
      opacity: .9;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
    }

    /* TradingViewコンテナ */
    .tvbox{
      position: absolute;
      inset: 0;
    }

    /* 小さい画面で見やすくする */
    @media (max-width: 560px){
      :root{
        --stage-vw: 96vw;
        --stage-vh: 94vh;
      }
      .label{ font-size: 12px; }
      .grid{ grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
    }
  </style>
</head>

<body>
  <div class="stage-wrap">
    <div class="stage">
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <script>
    // 一括表示するコイン一覧（基本はJPY）
    // 114514はJPYが一般的でないためUSDTにしています。
    const COINS = [
      { name: "BTC",     symbol: "BTCJPY",           note: "JPY" },
      { name: "ETH",     symbol: "ETHJPY",           note: "JPY" },
      { name: "SOL",     symbol: "SOLJPY",           note: "JPY" },
      { name: "PEPE",    symbol: "PEPEJPY",          note: "JPY (meme)" },
      { name: "MASK",    symbol: "MASKUSDT",         note: "USDT (utility)" }, // ←JPYが必要なら後で差し替え
      { name: "SHIBA",   symbol: "SHIBJPY",          note: "JPY (meme)" },
      { name: "114514",  symbol: "MEXC:114514USDT",  note: "USDT (meme)" }
    ];

    // TradingView埋め込み（UIを極力消して“チャートだけ”に寄せる）
    // hide_* 系は埋め込み例で広く使われています。
    const TV_BASE = {
      interval: "15",
      timezone: "Asia/Tokyo",
      theme: "dark",
      style: "1",
      locale: "ja",
      enable_publishing: false,
      allow_symbol_change: false,
      details: false,
      hotlist: false,
      calendar: false,
      studies: [],
      // UI抑制（邪魔なものを減らす）
      hide_top_toolbar: true,
      hide_side_toolbar: true,
      hide_legend: true,
      hide_volume: true,
      save_image: false,
      autosize: true
    };

    const grid = document.getElementById("grid");

    function addPanel({name, symbol, note}) {
      const panel = document.createElement("div");
      panel.className = "panel";

      const label = document.createElement("div");
      label.className = "label";
      label.innerHTML = `<strong>${name}</strong> <span class="pill">${note}</span>`;
      panel.appendChild(label);

      const tv = document.createElement("div");
      tv.className = "tvbox";
      panel.appendChild(tv);

      // Widget script
      const script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js";
      script.async = true;

      const cfg = { ...TV_BASE, symbol };
      script.innerHTML = JSON.stringify(cfg);

      tv.appendChild(script);
      grid.appendChild(panel);
    }

    COINS.forEach(addPanel);
  </script>
</body>
</html>
