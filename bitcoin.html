<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crypto Charts (JPY)</title>
  <style>
    :root{
      --margin: 18px;          /* フル画面より少し小さくする余白 */
      --gap: 10px;
      --radius: 14px;

      --glass: rgba(20,20,20,.55);
      --glass-border: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
    }

    html, body {
      height: 100%;
      margin: 0;
      background: #0b0b0d;
      overflow: hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", sans-serif;
      color: var(--text);
    }

    /* 画面に対して 16:9 の箱を「最大まで」広げる（でも余白は残す） */
    .stage-wrap{
      height: 100vh;
      width: 100vw;
      display: grid;
      place-items: center;
      padding: var(--margin);
      box-sizing: border-box;
    }

    .stage{
      /* 16:9 を維持しつつ、画面内に収まる最大サイズ */
      width: min(calc(100vw - (var(--margin) * 2)), calc((100vh - (var(--margin) * 2)) * (16 / 9)));
      height: min(calc(100vh - (var(--margin) * 2)), calc((100vw - (var(--margin) * 2)) * (9 / 16)));
      aspect-ratio: 16 / 9;
    }

    /* 一括表示グリッド */
    .grid{
      width: 100%;
      height: 100%;
      display: grid;
      gap: var(--gap);
      /* 1024幅だと 4列になるように。狭い画面では自動で減る */
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      grid-auto-rows: 1fr;
    }

    .panel{
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      background: #0f1013;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.08);
    }

    /* 常時ラベル表示（ホバー不要） */
    .label{
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 5;
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 13px;
      letter-spacing: .2px;
      user-select: none;
      pointer-events: none; /* チャート操作を邪魔しない */
      display: inline-flex;
      gap: 8px;
      align-items: center;
      white-space: nowrap;
    }
    .pill{
      font-size: 11px;
      opacity: .9;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
    }

    .tvbox{
      position: absolute;
      inset: 0;
    }

    /* 114514を“中央1枚”にしたいならここを有効化
       ただしあなたのスクショは「上段4枚＋下段3枚」なので今回は通常配置のまま */
    /* .center1 { grid-column: 2 / span 1; } */
  </style>
</head>

<body>
  <div class="stage-wrap">
    <div class="stage">
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <script>
    // 基本JPY（MASK/114514はJPYが無い可能性が高いのでUSDT）
    const COINS = [
      { name: "BTC",    symbol: "BTCJPY",          note: "JPY" },
      { name: "ETH",    symbol: "ETHJPY",          note: "JPY" },
      { name: "SOL",    symbol: "SOLJPY",          note: "JPY" },
      { name: "PEPE",   symbol: "PEPEJPY",         note: "JPY (meme)" },
      { name: "MASK",   symbol: "MASKUSDT",        note: "USDT (utility)" },
      { name: "SHIBA",  symbol: "SHIBJPY",         note: "JPY (meme)" },
      { name: "114514", symbol: "MEXC:114514USDT", note: "USDT (meme)" }
    ];

    // TradingView埋め込み：邪魔なUIを減らす
    const TV_BASE = {
      interval: "15",
      timezone: "Asia/Tokyo",
      theme: "dark",
      style: "1",
      locale: "ja",
      enable_publishing: false,
      allow_symbol_change: false,
      details: false,
      hotlist: false,
      calendar: false,
      studies: [],
      save_image: false,
      autosize: true,

      hide_top_toolbar: true,
      hide_side_toolbar: true,
      hide_legend: true,
      hide_volume: true
    };

    const grid = document.getElementById("grid");

    function addPanel({name, symbol, note}) {
      const panel = document.createElement("div");
      panel.className = "panel";

      const label = document.createElement("div");
      label.className = "label";
      label.innerHTML = `<strong>${name}</strong><span class="pill">${note}</span>`;
      panel.appendChild(label);

      const tv = document.createElement("div");
      tv.className = "tvbox";
      panel.appendChild(tv);

      const script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js";
      script.async = true;

      script.innerHTML = JSON.stringify({ ...TV_BASE, symbol });
      tv.appendChild(script);

      grid.appendChild(panel);
    }

    COINS.forEach(addPanel);
  </script>
</body>
</html>
